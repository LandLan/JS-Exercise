<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style type="text/css">
	body,div {padding:0; margin:0;}
	#div1 {width:100px; height:100px; background:#f00; position: absolute;}

</style>
<script type="text/javascript">
	
	window.onload = function(){

		var oDiv = document.getElementById('div1');

		var timer = null;
		document.onkeydown = function(ev) {

			var ev = ev || event;
			console.log('down');
			clearInterval(timer);
			// console.log('222');
			timer = setInterval(function(){
				console.log(ev.keyCode);
				switch(ev.keyCode) {
					case 37:
						oDiv.style.left = oDiv.offsetLeft - 10 + 'px';
						break;
					case 38:
						oDiv.style.top = oDiv.offsetTop - 10 + 'px';
						break;
					case 39:
						oDiv.style.left = oDiv.offsetLeft + 10 + 'px';
						console.log(oDiv.style.left);
						break;
					case 40:
						oDiv.style.top = oDiv.offsetTop + 10 + 'px';
						break;
				}


			},5);

			
		}

		// timer = setInterval(function(){
		// 	clearInterval(timer);
		// 	document.onkeydown = function(ev) {

		// 		var ev = ev || event;
		// 		console.log('down');
				

		// 			switch(ev.keyCode) {
		// 				case 37:
		// 					oDiv.style.left = oDiv.offsetLeft - 10 + 'px';
		// 					break;
		// 				case 38:
		// 					oDiv.style.top = oDiv.offsetTop - 10 + 'px';
		// 					break;
		// 				case 39:
		// 					oDiv.style.left = oDiv.offsetLeft + 10 + 'px';
		// 					console.log(oDiv.style.left);
		// 					break;
		// 				case 40:
		// 					oDiv.style.top = oDiv.offsetTop + 10 + 'px';
		// 					break;
		// 			}
				
		// 	}

		// },30);

		document.onkeyup = function(ev) {
		
			var ev = ev || event;
			console.log('keyup');
			clearInterval(timer);
			
		}

	}

</script>
</head>
<body>
	<div id='div1'></div>
</body>
</html>
