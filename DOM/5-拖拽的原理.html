<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style type="text/css">
	#div1 {width:100px; height:100px; position:absolute; top:100px; left:100px; background:red;}
	#img1 {width: 100px; height:100px; position:absolute; top:300px; left:300px;}
</style>
<script type="text/javascript">
	
	window.onload = function(){

		var oDiv = document.getElementById('div1');
		var oImg = document.getElementById('img1');

		oImg.onmousedown = function(ev){

			var ev = ev || event;

			// var disX = ev.clientX;
			// var disY = ev.clientY;
			// var L = this.clientWidth;
			// var T = this.clientHeight;

			// var disX = ev.clientX - this.clientWidth; // 鼠标点击位置距离div左边的距离
			// var disY = ev.clientY - this.clientHeight; // 鼠标点击位置距离div上边框的距离

			// 这里用offsetLeft 和 clientWidth 有什么区别吗
			var disX = ev.clientX - this.offsetLeft;
			var disY = ev.clientY - this.offsetTop;

			//ie7 设置全局捕获
			if(oImg.setCapture){
				oImg.setCapture();
			}

			// alert(this.clientWidth);
			// // alert(disX + '-' + disY);

			document.onmousemove = function(ev){
				var ev = ev || event;

				oImg.style.left = ev.clientX - disX + 'px';
				oImg.style.top = ev.clientY - disY + 'px';

			}

			document.onmouseup = function(){
				document.onmousemove = document.onmouseup = null;
				// 释放全局捕获
				if ( oImg.releaseCapture ) {
					oImg.releaseCapture();
				}
			}

			return false;

		}

	}

</script>
</head>
<body>
	dsfsfds
	<div id='div1'></div>	
	<img src="1.jpg" id="img1" />
</body>
</html>
